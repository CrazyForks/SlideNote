# SlideNote v0.0.1 优化需求文档

> UI 细节优化 + 笔记排序功能

---

## 一、需求背景

v0.0.1 基础版本完成后，通过实际使用发现以下可优化点：

1. **布局问题**：编辑区域未充分利用右侧空间
2. **视觉一致性**：输入框聚焦时的蓝色边框与整体克制风格冲突
3. **功能缺失**：笔记列表顺序固定，无法按需调整

---

## 二、优化项清单

| 优先级 | 需求 | 类型 | 难度 |
|--------|------|------|------|
| P0 | 编辑区域占满宽度 | UI修复 | 低 |
| P0 | 移除聚焦蓝色边框 | UI调整 | 低 |
| P1 | 笔记列表排序功能 | 新功能 | 中 |

---

## 三、详细设计

### 3.1 编辑区域宽度优化 (P0)

**问题描述**：
当前 `note-content-section` 虽然设置了 `flex: 1`，但编辑器内部可能存在不必要的 padding 或 margin，导致右侧有留白。

**解决方案**：
1. 检查 `note-content-section` 的子元素布局
2. 优化 `.note-header` 和 `.note-editor` 的 padding
3. 确保内容真正占满可用空间

**预期效果**：
```
┌─────────────────────────────────────────────────────────────────┐
│  ┌─────────────────┐ ┌─────────────────────────────────────┐   │
│  │  笔记列表       │ │  标题输入框 [占满]                     │   │
│  │                 │ ├─────────────────────────────────────┤   │
│  │                 │ │                                      │   │
│  │                 │ │  内容编辑区 [占满]                    │   │
│  │                 │ │                                      │   │
│  │                 │ │                                      │   │
│  └─────────────────┘ └─────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────┘
```

---

### 3.2 移除聚焦边框 (P0)

**问题描述**：
当前全局 `:focus-visible` 样式设置了蓝色描边，与设计理念中的"克制的配色"冲突。

**解决方案**：
移除全局 focus outline，或改为更subtle的视觉反馈（如轻微背景变化）。

**修改位置**：
- `src/sidepanel/styles.css` 的 `:focus-visible` 规则
- `.search-bar-expanded .search-input:focus` 已处理
- 需要补充 `.note-title-input:focus` 和 `.note-content-textarea:focus`

---

### 3.3 笔记列表排序功能 (P1)

#### 3.3.1 方案对比

| 方案 | 优点 | 缺点 | 推荐 |
|------|------|------|------|
| 拖拽排序 | 直观、符合直觉 | 实现复杂、在窄列表中体验一般 | ❌ |
| 右键菜单 | 简单可靠、操作明确 | 需要额外点击 | ✅ |
| 上下箭头 | 无需学习成本 | 占用空间、每次只能移动一位 | ⚠️ |

**结论**：采用**右键菜单方案**

#### 3.3.2 交互设计

**触发方式**：在笔记列表项上右键点击

**菜单内容**：
```
┌─────────────────────┐
│  ▲ 移动到顶部       │
│  ▲ 上移             │
│  ▼ 下移             │
│  ▼ 移动到底部       │
│  ─────────          │
│  × 删除             │
└─────────────────────┘
```

**边界情况处理**：
- 第一条笔记：隐藏"上移"、"移动到顶部"
- 最后一条笔记：隐藏"下移"、"移动到底部"
- 只有一条笔记：只显示"删除"

#### 3.3.3 技术实现要点

1. **Context Menu 组件**：新建 `ContextMenu.js`
2. **事件监听**：在 NoteList 项上添加 `contextmenu` 事件
3. **数据层**：Store 需要新增排序方法：
   - `moveNoteToTop(id)`
   - `moveNoteToBottom(id)`
   - `moveNoteUp(id)`
   - `moveNoteDown(id)`
4. **持久化**：排序后立即保存到 storage

#### 3.3.4 UI 设计细节

```css
.context-menu {
  position: fixed;
  min-width: 120px;
  background: white;
  border-radius: 6px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.15);
  padding: 4px 0;
  z-index: 1000;
}

.context-menu-item {
  padding: 8px 12px;
  font-size: 12px;
  color: #1a1a1a;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 8px;
}

.context-menu-item:hover {
  background: #f5f5f5;
}

.context-menu-item.disabled {
  color: #ccc;
  pointer-events: none;
}

.context-menu-divider {
  height: 1px;
  background: #e5e5e5;
  margin: 4px 0;
}
```

---

## 四、实施计划

### Phase 1: UI 修复 (P0)
- [ ] 修复编辑区域宽度
- [ ] 移除聚焦边框

### Phase 2: 排序功能 (P1)
- [ ] 数据层：Store 添加排序方法
- [ ] 组件层：创建 ContextMenu 组件
- [ ] 交互层：NoteList 绑定右键事件
- [ ] 测试：边界情况、持久化

---

## 五、验收标准

### UI 修复
1. 编辑区内容占满右侧全部可用空间
2. 所有输入框聚焦时无蓝色边框

### 排序功能
1. 右键点击笔记项显示菜单
2. 各排序操作正确执行
3. 排序后刷新页面顺序保持
4. 边界情况（首/尾/单条）处理正确

---

## 六、后续优化方向（预留）

- [ ] 笔记分组功能
- [ ] 笔记置顶功能
- [ ] 快捷键支持
- [ ] 批量操作
