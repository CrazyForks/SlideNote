# 侧边栏优化 - 需求分析

> **版本**: v0.1
> **日期**: 2025-01-15
> **状态**: 分析中

---

## 一、当前设计分析

### 1.1 整体布局

```
┌─────────────────────────────────────────┐
│  SlideNote 侧边栏                        │
├──────────────┬──────────────────────────┤
│              │                          │
│  笔记列表区   │    内容编辑区             │
│  (180px)     │    (自适应)              │
│              │                          │
│  ┌────────┐  │                          │
│  │ Toolbar│  │   ┌──────────────────┐  │
│  ├────────┤  │   │  笔记标题         │  │
│  │        │  │   ├──────────────────┤  │
│  │ 笔记1  │  │   │                  │  │
│  │ 笔记2  │  │   │  编辑/预览区域    │  │
│  │ 笔记3  │  │   │                  │  │
│  │ ...    │  │   │                  │  │
│  ├────────┤  │   │                  │  │
│  │ Footer │  │   └──────────────────┘  │
│  └────────┘  │                          │
└──────────────┴──────────────────────────┘
```

### 1.2 当前功能

| 模块 | 功能 | 状态 |
|------|------|------|
| **笔记列表** | 显示所有笔记，点击切换 | ✅ 已实现 |
| **新建笔记** | 点击 "+" 创建新笔记 | ✅ 已实现 |
| **搜索** | 实时过滤笔记 | ✅ 已实现 |
| **右键菜单** | 上移/下移/置顶/置底/删除 | ✅ 已实现 |
| **侧边栏折叠** | 收起左侧列表区，只留 40px | ✅ 已实现 |
| **文件夹/分组** | 无 | ❌ 未实现 |

### 1.3 折叠/展开逻辑

**当前实现** (`app.js`):

| 状态 | 宽度 | 显示内容 |
|------|------|----------|
| **展开** | 180px | Toolbar + 笔记列表 + Footer |
| **折叠** | 40px | 仅展开按钮（圆形，居中） |

**触发方式**:
- 点击折叠按钮（左侧边缘中央）
- 自动展开：新建笔记时、搜索展开时

**状态持久化**:
```javascript
// 存储在 Chrome Storage Sync
sidebarCollapsed: boolean
```

### 1.4 数据结构

```javascript
// 笔记数据结构
{
  id: "note_xxx",
  title: "标题",
  content: "内容",
  createdAt: number,
  updatedAt: number,
  order: number  // 排序字段
}

// 无 folderId 或分类字段
```

---

## 二、问题与痛点

### 2.1 用户潜在痛点

| 痛点 | 描述 | 严重程度 |
|------|------|----------|
| 笔记多了难找 | 几十条笔记混在一起，滚动查找费劲 | 🔴 高 |
| 无分类管理 | 工作/生活/学习混在一起 | 🟡 中 |
| 无法批量操作 | 不能按分类统一操作 | 🟡 中 |
| 收起后完全盲操作 | 折叠后不知道有哪些笔记 | 🟢 低 |

### 2.2 产品定位约束

> **SlideNote 是便利贴，不是笔记本**

设计新功能时需要考虑：
- ✅ 保持简单，不复杂化
- ✅ 符合"随手记、随时查"的定位
- ❌ 不做成完整的笔记软件
- ❌ 不过度设计层级结构

---

## 三、优化方向讨论

### 3.1 文件夹/分组功能

**方案 A：简单分组（推荐）**

```
笔记列表
├── 全部笔记
├── 工作 (3)
├── 生活 (2)
├── 学习 (5)
└── + 新建分组
```

- 每个笔记属于一个分组
- 点击分组名筛选该组笔记
- 分组数量有限制（如最多 10 个）

**方案 B：标签系统**

```
笔记列表
├── [全部] [工作] [生活] [学习]
├── 笔记1 #工作 #AI
├── 笔记2 #生活
└── ...
```

- 一个笔记可以有多个标签
- 点击标签筛选

### 3.2 折叠状态优化

**当前问题**：折叠后完全看不到笔记列表

**优化建议**：
- 折叠后悬停显示笔记预览（Tooltip）
- 或者：折叠时改为显示最近 3 条笔记的缩略形式

### 3.3 交互优化

| 当前 | 优化后 |
|------|--------|
| 右键排序 | 拖拽排序（可选） |
| 无快捷键 | 快捷键切换分组 |
| 无统计 | 显示每组笔记数量 |

---

## 四、待确认问题

在开始设计前，需要确认：

1. **是否真的需要文件夹功能？**
   - 还是说优化搜索就够了？

2. **如果做文件夹，简单分组还是标签？**
   - 简单分组：一个笔记属于一个组
   - 标签：一个笔记可以有多个标签

3. **折叠状态的优化方向？**
   - 悬停预览？
   - 还是保持现状？

4. **功能的复杂度边界？**
   - 最多支持多少个分组？
   - 是否需要嵌套（分组下有子分组）？

---

## 五、建议

基于 SlideNote "便利贴" 的定位，我建议：

**优先做**：
1. ✅ 简单分组功能（最多 5-8 个分组）
2. ✅ 分组筛选（点击分组名显示该组笔记）
3. ✅ 新建/编辑笔记时可选择分组

**不做**：
- ❌ 嵌套分组
- ❌ 复杂的标签系统
- ❌ 分组颜色/图标自定义
- ❌ 拖拽排序（保持现有的右键菜单即可）

---

> **请确认优化方向，我将开始详细设计。**
