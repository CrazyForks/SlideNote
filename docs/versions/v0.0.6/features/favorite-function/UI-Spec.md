# 收藏功能 UI 设计规范

> **版本**: v0.0.6
> **日期**: 2025-01-18
> **原型**: `prototype.html`

---

## 一、设计概述

### 1.1 核心决策

| 决策点 | 方案 | 理由 |
|--------|------|------|
| 收藏入口 | 右键菜单 + 更多菜单（⋮） | 不占用列表空间，保持界面简洁 |
| 列表显示 | 不显示星标图标 | 通过筛选 Tab 查看收藏，避免视觉混乱 |
| 详情页头部 | 不显示收藏图标 | 收藏是隐式操作，不抢占主操作 |

### 1.2 尺寸规范

| 状态 | 宽度 | 说明 |
|------|------|------|
| **展开** | 180px | 显示标题 + 预览内容 |
| **窄化** | 80px | 仅显示标题（单行截断） |

### 1.3 颜色规范

| 用途 | 颜色 | Hex |
|------|------|-----|
| 收藏（菜单中） | 金色 | `#f59e0b` |
| 未收藏（菜单中） | 灰色 | `#999999` |
| 选中态背景 | 白色 | `#ffffff` |
| 普通态背景 | 灰色 | `#f5f5f5` |
| 选中指示条 | 蓝色 | `#0066cc` |

---

## 二、组件设计

### 2.1 笔记列表项（展开状态）

```
展开状态 (180px):
┌────────────────────────────────┐
│ 标题文字                       │  ← 仅标题，无星标
│    预览内容预览内容预览...      │  ← 预览内容
└────────────────────────────────┘
padding: 6px 12px
```

**样式规范**：
- 标题字体：12px, 中等粗细 (font-weight: 500)
- 预览字体：10px, 灰色 (#666)
- 选中态：白色背景 + 左侧 3px 蓝色指示条
- Hover: 半透明白色背景 (rgba(255,255,255,0.5))

### 2.2 笔记列表项（窄化状态）

```
窄化状态 (80px):
┌─────────────┐
│ 标题文字... │  ← 仅标题，单行截断显示省略号
└─────────────┘
padding: 8px 12px
```

**样式规范**：
- 标题字体：11px
- 文本对齐：左对齐（非居中）
- 文本截断：`text-overflow: ellipsis`, `white-space: nowrap`
- 选中态：左侧 3px 蓝色指示条，标题左移 4px 避免紧贴

**选中态特殊处理**：
```css
/* 窄化时 active 样式 */
.note-item.active::before {
  content: '';
  position: absolute;
  left: 0;
  top: 4px;
  bottom: 4px;
  width: 3px;
  background: var(--color-primary);
}

/* 标题左边距，避免和指示条太近 */
.note-item.active .note-item-title {
  padding-left: 4px;
}
```

### 2.3 筛选 Tab

```
展开状态 - 顶部 Tab：
┌────────────────────────────────┐
│ [ 全部笔记 ] [ ⭐ 收藏 (2) ]   │  ← Tab 切换
├────────────────────────────────┤
│ AI 提示词                      │
│ 常用命令                       │
└────────────────────────────────┘
```

**样式规范**：
- 字体：12px
- 选中态：蓝色文字 + 底部 2px 蓝色边框
- 未选中：灰色文字 (#666)
- Hover: 背景变灰 (#e8e8e8)

```
窄化状态 - 纵向切换：
┌──────┐
│ 全部 │  ← 点击切换
│  ⭐  │  ← 点击切换（星标图标）
├──────┤
│笔记1 │
│笔记2 │
└──────┘
```

**窄化 Tab 样式**：
- 纵向排列（`flex-direction: column`）
- 选中态：左侧 3px 蓝色边框（代替底部边框）
- 高度：约 38px/项

---

## 三、收藏入口设计

### 3.1 右键菜单

```
┌──────────────────┐
│  ⭐ 收藏         │  ← 点击切换收藏/取消收藏
│ ─────────────────│
│  🗑 删除         │
└──────────────────┘
```

**交互规范**：
- 触发：右键点击笔记列表项
- 位置：鼠标位置
- 收藏图标：
  - 已收藏：金色 (#f59e0b)
  - 未收藏：灰色 (#999)
- 文字动态显示：收藏 / 取消收藏

### 3.2 更多菜单（详情页）

```
┌──────────────────┐
│  ⭐ 收藏         │  ← 点击切换收藏/取消收藏
│ ─────────────────│
│  🗑 删除         │
└──────────────────┘
```

**交互规范**：
- 触发：点击详情页头部右侧（⋮）按钮
- 位置：头部右侧下方
- 收藏样式与右键菜单一致

### 3.3 菜单组件样式

```css
/* 菜单容器 */
.context-menu, .more-menu {
  min-width: 140px;
  background: #ffffff;
  border-radius: 6px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
  border: 1px solid #e5e5e5;
  padding: 4px 0;
}

/* 菜单项 */
.menu-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  font-size: 12px;
  cursor: pointer;
}

.menu-item:hover {
  background: #e8e8e8;
}

/* 星标图标 */
.menu-item svg.star-icon {
  width: 14px;
  height: 14px;
}

.menu-item svg.star-icon.active {
  color: #f59e0b;
}

.menu-item svg.star-icon.inactive {
  color: #999;
}
```

---

## 四、收起/展开按钮设计

### 4.1 收起按钮（展开状态显示）

```
位置：侧边栏右边缘中央
尺寸：14 × 48px
样式：
┌──┐           ┌────────────┐
│▶│ ← ──────── │  笔记列表  │
└──┘           └────────────┘
```

**样式规范**：
- 位置：`right: -6px`, `top: 50%`, `transform: translateY(-50%)`
- 背景：#fafafa，边框 1px #bbb
- 圆角：右侧 6px
- Hover: 背景变蓝 (#f0f7ff)，宽度扩展到 16px

### 4.2 展开按钮（窄化状态显示）

```
位置：侧边栏正中央
尺寸：34 × 34px 圆形
样式：
         ┌──┐
┌────┐   │◀│  ← tooltip: "展开侧边栏"
│笔记1│  └──┘
└────┘
```

**样式规范**：
- 位置：`left: 50%`, `top: 50%`, `transform: translate(-50%, -50%)`
- 圆形：`border-radius: 50%`
- Hover: 缩放 1.08 倍，显示 tooltip

---

## 五、交互状态流转

```
┌─────────────────────────────────────────────────────────┐
│                        用户操作                          │
└─────────────────────────────────────────────────────────┘
                              │
              ┌───────────────┼───────────────┐
              │               │               │
         右键点击笔记      点击更多菜单      点击筛选 Tab
              │               │               │
              ▼               ▼               ▼
    ┌───────────────┐ ┌───────────────┐ ┌───────────────┐
    │ 显示收藏选项   │ │ 显示收藏选项   │ │ 切换筛选模式   │
    │ 点击切换状态   │ │ 点击切换状态   │ │ 过滤笔记列表   │
    └───────────────┘ └───────────────┘ └───────────────┘
              │               │               │
              └───────────────┴───────────────┘
                              ▼
                    ┌───────────────────┐
                    │ 同步到 Chrome      │
                    │ Storage Sync API  │
                    │ 跨设备同步         │
                    └───────────────────┘
```

---

## 六、响应式行为

| 操作 | 展开状态 | 窄化状态 |
|------|----------|----------|
| 点击收起按钮 | → 窄化状态 | - |
| 点击展开按钮 | - | → 展开状态 |
| 右键笔记 | 显示菜单 | 显示菜单 |
| 点击筛选 Tab | 切换筛选 | 切换筛选 |
| 点击笔记 | 切换选中 | 切换选中（可自动展开） |

---

## 七、设计资源

### 7.1 图标资源

| 图标 | 用途 | SVG |
|------|------|-----|
| ⭐ 星标 | 收藏状态指示 | 16×16px |
| ⋮ 更多 | 详情页菜单 | 24×24px (3圆点) |
| ▶ 收起 | 收起侧边栏 | 9×9px |
| ◀ 展开 | 展开侧边栏 | 15×15px |

### 7.2 原型文件

**文件**: `prototype.html`

**交互演示**：
1. 双击 HTML 文件在浏览器中打开
2. 右键点击笔记 → 测试收藏功能
3. 点击更多菜单（⋮）→ 测试收藏功能
4. 点击筛选 Tab → 测试筛选
5. 点击收起按钮 → 查看窄化状态

---

## 八、开发检查清单

- [ ] 笔记列表不显示星标图标
- [ ] 右键菜单包含收藏选项
- [ ] 更多菜单包含收藏选项
- [ ] 收藏状态动态显示（收藏/取消收藏）
- [ ] 筛选 Tab 正常工作
- [ ] 窄化状态标题正确截断
- [ ] 窄化状态 active 指示条不贴文字
- [ ] 收藏状态跨设备同步
